# ====== Husky pre-push Hook ======
# push ì „ ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬ 3ë‹¨ê³„(íƒ€ì…ì²´í¬, í…ŒìŠ¤íŠ¸, ë¹Œë“œ)
# ëª©ì : ê¹¨ì§„ ì»´í¬ë„ŒíŠ¸ ë¡œì§ì´ main ë¸Œëœì¹˜ì— í•©ì³ì§€ëŠ” ê²ƒ ë°©ì§€

echo "ğŸ” Type checking..."

pnpm typecheck || {
  echo "âŒ Type check failed. Push aborted."
  exit 1
}

echo "ğŸ§ª Running test suites (unit + ui)..."

pnpm test:unit && pnpm test:ui || {
  echo ""
  echo "âŒ Test suite failed. Push aborted."
  echo "ğŸ’¡ Please fix the errors above before pushing."
  echo ""
  exit 1
}

echo "ğŸ—ï¸ Building library..."

pnpm build:lib || {
  echo ""
  echo "âŒ Library build failed. Push aborted."
  exit 1
}

echo "âœ… All tests passed! Safe to push ğŸš€"